{% extends "layout.html" %}

{% block content %}

<div class="row justify-content-center">
	<div class="col-lg-7 mt-4 mb-4">
		<div class="card p-3 shadow-sm">
			<h1 class="text-center"> Add New Task</h1>
			<br>
			<form method="post" action="{{ url_for('taskpb.add_task', department_id=department.id) }}">
				{{ form.hidden_tag() }}

				<!-- Task Type -->
				{{ form.task_type.label(class="form-label") }}
				{{ form.task_type(class="form-control") }}
				<br>


				<!-- Governorate -->

				{{ form.governorate.label(class="form-label") }}
				{{ form.governorate(class="form-control", onchange="this.form.submit();") }}

				<br>

				<!-- Hospital -->

				{{ form.hospital.label(class="form-label") }}
				{{ form.hospital(class="form-control", onchange="this.form.submit();") }}

				<br>

				<!-- Device -->

				{{ form.device.label(class="form-label") }}
				{{ form.device(class="form-control", onchange="this.form.submit();") }}

				<br>

				<!-- Model -->

				{{ form.model.label(class="form-label") }}
				{{ form.model(class="form-control", onchange="this.form.submit();") }}

				<br>

				<!-- Machine -->
				{% if form.model.data %}
				{{ form.machine.label(class="form-label") }}
				{% endif %}
				<div>
					{% for machine_id, machine_name in form.machine.choices %}
					<div>
						<input type="checkbox" name="machine" value="{{ machine_id }}" id="machine_{{ machine_id }}">
						<label for="machine_{{ machine_id }}">{{ machine_name }}</label>
					</div>
					{% endfor %}
				</div>
				<br>

				<!-- User -->
				{{ form.user.label(class="form-label") }}
				<div>
					{% for user_id, user_name in form.user.choices %}
					<div>
						<input type="checkbox" name="user" value="{{ user_id }}" id="user_{{ user_id }}">
						<label for="user_{{ user_id }}">{{ user_name }}</label>
					</div>
					{% endfor %}
				</div>
				<br>

				<!-- Description -->
				{{ form.description.label(class="form-label") }}
				{{ form.description(class="form-control") }}
				<br>



				<!-- Final Submission -->
				<button type="submit" class="btn btn-primary">Create Task</button>
			</form>
		</div>
	</div>
</div>

{% endblock %}